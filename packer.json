{
"builders": [
  {
  "type": "openstack",
  "identity_endpoint": "http://172.19.74.169:5000/v3",
  "tenant_name": "admin",
  "domain_name": "Default",
  "username": "admin",
  "password": "password",
  "region": "RegionOne",
  "use_floating_ip": true,
  "floating_ip_pool": "external",
  "ssh_username": "ubuntu",
  "image_name": "packer-ubuntu",
  "networks": ["f60c08bd-3f40-41ae-b5f7-256ac9c7b8ac"],
  "source_image": "6d153be4-c261-4380-90e2-858f7da2c560",
  "flavor": "m1.small",
  "insecure": "true"
  }
  ],
"provisioners": [
  {
      "destination": "/home/ubuntu/tomcat7",
      "source": "./tomcat7",
      "type": "file"
  },
  {
      "destination": "/home/ubuntu/tomcat-users.xml",
      "source": "./tomcat-users.xml",
      "type": "file"
  },
  {
    "type": "shell",
    "inline": [
    "sudo apt-get update",
    "sudo apt-get install -y default-jdk",
    "sudo apt-get install -y tomcat7",
    "sudo apt-get install -y tomcat7-docs tomcat7-admin tomcat7-examples",
    "sudo cp /home/ubuntu/tomcat7 /etc/default/tomcat7",
    "sudo cp /home/ubuntu/tomcat-users.xml /etc/tomcat7/tomcat-users.xml",
    "git clone https://github.com/steinsag/gwt-maven-example",
    "cd gwt-maven-example",
    "sudo mvn clean install",
    "mvn tomcat7:run-war-only",
    "sudo service tomcat7 restart"]
  }]
}
